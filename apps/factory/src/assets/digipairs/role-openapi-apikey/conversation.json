{
  "description": "Generating a response for the user via the chatbot.",
  "summary": "Conversation générique openApi-apiKey",
  "library": "@digipair/skill-chatbot",
  "element": "boost",
  "metadata": {
    "standalone": false,
    "selector": "any",
    "url": "^$"
  },
  "properties": {
    "steps": [
      {
        "name": "Conversation",
        "execute": [
          {
            "library": "@digipair/skill-basic",
            "element": "setVariable",
            "properties": {
              "name": "history",
              "value": "FEEL:if request.body.inputs[1].value = null then []\nelse request.body.inputs[1].value"
            }
          },
          {
            "library": "@digipair/skill-dsp",
            "element": "generate",
            "properties": {
              "signature": "\"You are a helpful assistant, capable of explaining concepts in a simple manner.\" \nuserQuestion:string,\nhistory?:string[] ->\n  answer: string \"Assistant answer\"",
              "input": {
                "userQuestion": "FEEL:request.body.prompt",
                "history": "FEEL:variables.history"
              }
            }
          },
          {
            "library": "@digipair/skill-factory",
            "element": "start",
            "properties": {
              "digipair": "FEEL:request.digipair",
              "reasoning": "answer",
              "version": "latest",
              "body": {
                "assistant": "FEEL:previous.answer",
                "boost": [
                  {
                    "prompt": true,
                    "required": true,
                    "step": "Conversation",
                    "inputs": [
                      {
                        "library": "@digipair/skill-web-inputs",
                        "element": "digipair-input-hidden",
                        "properties": {
                          "value": "FEEL:flatten([variables.history, [\n  \"user: \" + request.body.prompt,\n  \"assistant: \" + parent.previous.answer\n]])"
                        }
                      }
                    ]
                  }
                ]
              }
            },
            "conditions": {},
            "name": "digipair"
          }
        ]
      }
    ]
  },
  "pins": []
}
