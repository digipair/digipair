{
  "openapi": "3.0.0",
  "info": {
    "title": "@digipair/skill-keycloak",
    "summary": "Affichage de pages web s√©curis√©e",
    "description": "Cette comp√©tence englobe la connaissance et l'utilisation des technologies web n√©cessaires pour d√©velopper et maintenir des sites internet s√©curis√©s par keycloak.",
    "version": "0.1.0",
    "x-icon": "üîê"
  },
  "paths": {
    "/executeFactory": {
      "post": {
        "summary": "Dans la factory",
        "description": "Ex√©cution d'une liste de capacit√© dans la factory",
        "tags": ["web"],
        "metadata": [],
        "parameters": [
          {
            "name": "execute",
            "summary": "Ex√©cuter",
            "required": true,
            "description": "Liste de capacit√© √† ex√©cuter",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "https://schemas.digipair.ai/pinsSettings"
              }
            }
          },
          {
            "name": "secured",
            "summary": "S√©curis√©",
            "required": false,
            "description": "S√©curise l'ex√©cution via un token Keycloak",
            "schema": {
              "type": "boolean"
            }
          }
        ]
      }
    },
    "/login": {
      "post": {
        "summary": "Identification de l'utilisateur",
        "description": "Identification de l'utilisateur sur le site internet via le serveur Keycloak",
        "tags": ["web"],
        "metadata": [],
        "parameters": []
      }
    },
    "/logout": {
      "post": {
        "summary": "D√©sidentification de l'utilisateur",
        "description": "D√©sidentification de l'utilisateur sur le site internet via le serveur Keycloak",
        "tags": ["web"],
        "metadata": [],
        "parameters": []
      }
    }
  },
  "components": {
    "schemas": {
      "SecuredInput": {
        "type": "object",
        "tags": ["boost"],
        "summary": "Entr√©es s√©curis√©es",
        "properties": {
          "prompt": {
            "type": "boolean"
          },
          "required": {
            "type": "boolean"
          },
          "selector": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "inputs": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        "required": []
      },
      "SecuredTrigger": {
        "type": "object",
        "tags": ["boost"],
        "summary": "D√©clencheur",
        "properties": {
          "name": {
            "type": "string"
          },
          "selector": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "required": []
      },
      "SecuredStep": {
        "type": "object",
        "tags": ["boost"],
        "summary": "Etape",
        "properties": {
          "name": {
            "summary": "Nom de l'√©tape",
            "type": "string"
          },
          "execute": {
            "summary": "Actions √† ex√©cuter",
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        "required": ["name", "execute"]
      }
    }
  },
  "x-scene-blocks": {
    "/page": {
      "summary": "Page internet s√©curis√©e",
      "description": "Affichage d'une page d'un site internet s√©curis√©e par Keycloak.",
      "tags": ["web", "service"],
      "metadata": [],
      "parameters": [
        {
          "name": "body",
          "summary": "Contenu",
          "required": true,
          "description": "Contenu de la page",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "title",
          "summary": "Titre",
          "required": false,
          "description": "Titre de la page",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "favicon",
          "summary": "Icone de la page",
          "required": false,
          "description": "Icone de la page",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "styleHtml",
          "summary": "Style CSS du HTML",
          "required": false,
          "description": "Style css de l'√©l√©ment HTML",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "styleBody",
          "summary": "Style CSS du BODY",
          "required": false,
          "description": "Style css de l'√©l√©ment BODY",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "url",
          "summary": "Adresse du Keycloak",
          "required": false,
          "description": "Adresse du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "realm",
          "summary": "Realm",
          "required": false,
          "description": "Realm du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "clientId",
          "summary": "Client ID",
          "required": false,
          "description": "Client ID du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "factoryUrl",
          "summary": "Adresse de la factory",
          "required": false,
          "description": "Adresse de la factory Digipair",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "factoryInitialize",
          "summary": "Lors de l'initialisation cot√© factory",
          "required": false,
          "description": "Action d√©clench√©e lors de l'initialisation cot√© factory",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "browserInitialize",
          "summary": "Lors de l'initialisation cot√© navigateur",
          "required": false,
          "description": "Action d√©clench√©e lors de l'initialisation cot√© navigateur",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "browserLoad",
          "summary": "Lorsque la page est charg√©e",
          "required": false,
          "description": "Action d√©clench√©e lorsque la page est charg√©e cot√© navigateur",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "unlogged",
          "summary": "Si l'utilisateur n'est pas identifi√©",
          "required": false,
          "description": "Action d√©clench√©e lorsque la page est charg√©e cot√© navigateur si l'utilisateur n'est pas identifi√©",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "logged",
          "summary": "Si l'utilisateur est identifi√©",
          "required": false,
          "description": "Action d√©clench√©e lorsque la page est charg√©e cot√© navigateur si l'utilisateur est identifi√©",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        }
      ]
    },
    "/service": {
      "summary": "Web service s√©curis√©",
      "description": "R√©ponse √† un appel http s√©curis√© par Keycloak.",
      "tags": ["service"],
      "metadata": [],
      "parameters": [
        {
          "name": "execute",
          "summary": "Ex√©cute",
          "required": true,
          "description": "Commandes √† ex√©cuter",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "secured",
          "summary": "S√©curis√©",
          "required": false,
          "description": "Acc√®s autoris√© seulement si un token Keycloak est fourni",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "url",
          "summary": "Adresse du Keycloak",
          "required": false,
          "description": "Adresse du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "realm",
          "summary": "Realm",
          "required": false,
          "description": "Realm du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        }
      ]
    },
    "/boost": {
      "summary": "Boost s√©curis√©",
      "description": "Boost propos√© par le Digipair s√©curis√© par Keycloak",
      "tags": ["boost", "service"],
      "metadata": [
        {
          "name": "boosts",
          "summary": "Liste des d√©clencheurs",
          "required": true,
          "description": "Liste des d√©clencheurs du boost",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SecuredInput"
            }
          }
        }
      ],
      "parameters": [
        {
          "name": "steps",
          "summary": "Execute les √©tapes suivantes",
          "required": true,
          "description": "Execute les √©tapes d√©finies suivantes",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SecuredStep"
            }
          }
        },
        {
          "name": "secured",
          "summary": "S√©curis√©",
          "required": false,
          "description": "Acc√®s autoris√© seulement si un token Keycloak est fourni",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "url",
          "summary": "Adresse du Keycloak",
          "required": false,
          "description": "Adresse du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "realm",
          "summary": "Realm",
          "required": false,
          "description": "Realm du serveur Keycloak",
          "schema": {
            "type": "string"
          }
        }
      ]
    }
  }
}
