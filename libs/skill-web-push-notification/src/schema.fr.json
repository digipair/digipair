{
  "openapi": "3.0.0",
  "info": {
    "title": "@digipair/skill-web-push-notification",
    "summary": "Enregistre l'utilisateur aux notifications push",
    "description": "s'enregistrer pour recevoir des notifications push.",
    "version": "0.1.0",
    "x-icon": "üìï"
  },
  "paths": {
    "/initialize": {
      "post": {
        "tags": ["web", "spatial"],
        "summary": "Enregistre l'utilisateur aux notifications push",
        "description": "Enregistre l'utilisateur pour recevoir des notifications push en temps r√©el.",
        "parameters": [
          {
            "name": "SERVICE_WORKER_PATH",
            "summary": "Chemin du service worker",
            "required": false,
            "description": "Chemin du service worker pour les notifications push.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "publicKey",
            "summary": "Cl√© publique VAPID",
            "required": false,
            "description": "Cl√© publique VAPID utilis√©e pour autoriser les notifications.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Abonnement aux notifications push initialis√© avec succ√®s",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "Objet d'abonnement push depuis l'API Push du navigateur",
                      "properties": {
                        "endpoint": {
                          "type": "string",
                          "description": "L'URL du point de terminaison pour le service push"
                        },
                        "expirationTime": {
                          "type": ["number", "null"],
                          "description": "Moment o√π l'abonnement expire"
                        },
                        "keys": {
                          "type": "object",
                          "properties": {
                            "p256dh": {
                              "type": "string",
                              "description": "Cl√© publique client pour le chiffrement"
                            },
                            "auth": {
                              "type": "string",
                              "description": "Secret d'authentification client"
                            }
                          }
                        }
                      },
                      "example": {
                        "endpoint": "https://fcm.googleapis.com/fcm/send/...",
                        "expirationTime": null,
                        "keys": {
                          "p256dh": "BEl62iUYgUivxIkv69yViA3...",
                          "auth": "8eDyX_uCN0XRhSbY5hs7Hg"
                        }
                      }
                    },
                    {
                      "type": "null",
                      "description": "L'abonnement a √©chou√© (service worker non pris en charge, permissions refus√©es, etc.)"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {}
  }
}
