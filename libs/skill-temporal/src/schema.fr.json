{
  "openapi": "3.0.0",
  "info": {
    "title": "@digipair/skill-temporal",
    "summary": "Gestion des workflows temporal",
    "description": "g√©rer des workflows temporal",
    "version": "0.1.0",
    "x-icon": "üë©‚Äçüíª"
  },
  "paths": {
    "/activity": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Activit√©e",
        "description": "D√©finit une activit√©",
        "parameters": [
          {
            "name": "name",
            "summary": "Nom",
            "required": false,
            "description": "Nom de l'√©tape",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "execute",
            "summary": "Ex√©cute",
            "required": true,
            "description": "Liste des actions √† ex√©cuter",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "https://schemas.digipair.ai/pinsSettings"
              }
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "R√©sultat de l'ex√©cution de l'activit√©",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "description": "R√©sultat de l'ex√©cution de l'activit√©"
                }
              }
            }
          }
        }
      }
    },
    "/sleep": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Attente",
        "parameters": [
          {
            "name": "name",
            "summary": "Nom",
            "required": false,
            "description": "Nom de l'√©tape",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "duration",
            "summary": "Dur√©e",
            "required": true,
            "description": "Dur√©e de l'attente",
            "schema": {
              "type": "string"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Confirmation de la dur√©e d'attente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "description": "Confirmation que la dur√©e d'attente a √©t√© appliqu√©e"
                }
              }
            }
          }
        }
      }
    },
    "/condition": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Condition d'attente",
        "description": "Condition d'attente dans un workflow",
        "parameters": [
          {
            "name": "condition",
            "summary": "Condition",
            "required": true,
            "description": "Condition d'attente au format Feel",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "timeout",
            "summary": "Timeout",
            "required": false,
            "description": "Timeout de la condition",
            "schema": {
              "type": "number"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "R√©sultat de la condition d'attente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "boolean",
                  "description": "Si la condition a √©t√© remplie avant le timeout"
                }
              }
            }
          }
        }
      }
    },
    "/goto": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Aller √† l'√©tape",
        "parameters": [
          {
            "name": "target",
            "summary": "Nom de la destination",
            "required": true,
            "description": "Nom de l'√©tape de destination",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "name",
            "summary": "Nom",
            "required": false,
            "description": "Nom de l'√©tape",
            "schema": {
              "type": "string"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Num√©ro d'√©tape apr√®s goto",
            "content": {
              "application/json": {
                "schema": {
                  "type": "number",
                  "description": "Num√©ro de l'√©tape cible dans le workflow"
                }
              }
            }
          }
        }
      }
    },
    "/stop": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Arr√™te le workflow",
        "description": "Arr√™te le workflow",
        "parameters": [
          {
            "name": "name",
            "summary": "Nom",
            "required": false,
            "description": "Nom de l'√©tape",
            "schema": {
              "type": "string"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Confirmation de l'arr√™t du workflow",
            "content": {
              "application/json": {
                "schema": {
                  "type": "null",
                  "description": "Le workflow a √©t√© arr√™t√©"
                }
              }
            }
          }
        }
      }
    },
    "/push": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Envoi de nouvelles donn√©es dans un workflow",
        "description": "Envoi de nouvelles donn√©es dans le workflow",
        "parameters": [
          {
            "name": "id",
            "summary": "Identifiant du workflow",
            "required": true,
            "description": "Identifiant du workflow",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "data",
            "summary": "Donn√©es",
            "required": true,
            "description": "Donn√©es",
            "schema": {
              "type": "object"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Confirmation de l'envoi des donn√©es",
            "content": {
              "application/json": {
                "schema": {
                  "type": "null",
                  "description": "Les donn√©es ont √©t√© envoy√©es avec succ√®s au workflow"
                }
              }
            }
          }
        }
      }
    },
    "/terminate": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Arr√™te un workflow",
        "description": "Arr√™te un workflow",
        "parameters": [
          {
            "name": "id",
            "summary": "Identifiant du workflow",
            "required": true,
            "description": "Identifiant du workflow",
            "schema": {
              "type": "string"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Confirmation de l'arr√™t du workflow",
            "content": {
              "application/json": {
                "schema": {
                  "type": "null",
                  "description": "Le workflow a √©t√© arr√™t√© avec succ√®s"
                }
              }
            }
          }
        }
      }
    },
    "/list": {
      "post": {
        "tags": [
          "service"
        ],
        "summary": "Liste les workflows",
        "description": "Liste les workflows",
        "parameters": [
          {
            "name": "query",
            "summary": "Requ√™te",
            "required": false,
            "description": "Requ√™te de recherche",
            "schema": {
              "type": "string"
            }
          }
        ],
        "x-events": [],
        "responses": {
          "200": {
            "description": "Liste des workflows",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WorkflowExecutionInfo"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "WorkflowExecutionInfo": {
        "tags": [],
        "type": "object",
        "description": "Informations sur une ex√©cution de workflow Temporal",
        "properties": {
          "workflowId": {
            "type": "string",
            "description": "Identifiant unique du workflow"
          },
          "runId": {
            "type": "string",
            "description": "Identifiant unique de l'ex√©cution du workflow"
          },
          "type": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Nom du type de workflow"
              }
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "Running",
              "Completed",
              "Failed",
              "Cancelled",
              "Terminated"
            ],
            "description": "Statut actuel du workflow"
          },
          "startTime": {
            "type": "string",
            "format": "date-time",
            "description": "Quand le workflow a √©t√© d√©marr√©"
          },
          "taskQueue": {
            "type": "string",
            "description": "Nom de la file d'attente des t√¢ches utilis√©e par le workflow"
          }
        }
      }
    }
  },
  "x-scene-blocks": {
    "/workflow": {
      "summary": "Workflow Temporal",
      "description": "Execute un workflow Temporal",
      "tags": [
        "service"
      ],
      "metadata": [],
      "parameters": [
        {
          "name": "id",
          "summary": "Identifiant",
          "required": true,
          "description": "Identifiant du workflow",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "steps",
          "summary": "Ex√©cute les √©tapes suivantes",
          "required": true,
          "description": "Ex√©cute les √©tapes d√©finies",
          "schema": {
            "type": "array",
            "items": {
              "$ref": "https://schemas.digipair.ai/pinsSettings"
            }
          }
        },
        {
          "name": "data",
          "summary": "Donn√©es du workflow",
          "required": false,
          "description": "Donn√©es du workflow temporal",
          "schema": {
            "type": "object"
          }
        },
        {
          "name": "options",
          "summary": "Options temporal",
          "required": false,
          "description": "Options du workflow temporal",
          "schema": {
            "type": "object"
          }
        }
      ],
      "responses": {
        "200": {
          "description": "R√©sultat de l'ex√©cution du workflow",
          "content": {
            "application/json": {
              "schema": {
                "description": "Le r√©sultat de la derni√®re √©tape ex√©cut√©e dans le workflow"
              }
            }
          }
        }
      }
    }
  }
}